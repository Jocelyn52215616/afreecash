<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Page d'échange</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<style>
/* CSS existant pour la page de connexion */
html, body {
    overflow: hidden; /* Empêche le défilement */
    height: 100%;     /* Assure que le body occupe toute la hauteur */
    
    font-family: sans-serif;
    background: linear-gradient(to top, #1a2a6c, #1C1F24, #1C1F24); 
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh; 
    margin: 0;
    display: flex;          /* Permet d'utiliser flexbox pour le positionnement */
    flex-direction: column; /* Empile les éléments verticalement */
}



.profile-container {
    display: flex;
    align-items: center;
}

.profile-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-right: 10px;
}

#telegram-id {
    font-weight: bold;
    color: white;
}


h1 {
    margin: 0;
    text-align: center;
}

p {
    margin-top: 50px;
    font-size: 13px;
    text-align: center;
    color: #ffffff; /* Bleu */
}
h4 {
    position: relative;    
    color: #ffffff; /* Gris foncé */
    margin-bottom: 30px;
    top: 20px;
}


h2 {
    text-align: center;
    color: #ffffff; /* Gris foncé */
    margin-bottom: 30px;
}
#receptionCard h2 {
    margin-top: 5px; /* Environ 0.3 cm */
    color: white;
    
}



#depositCard h2 {
    color: rgb(255, 253, 253);
    position: relative;
    top: 35px;
    margin-top: 0; /* Supprime la marge supérieure du titre */

}



.background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to top, #4ea8e4);
    clip-path: polygon(0 0, 120% 0, 50% 75%, 0 20%);
}

/* CSS spécifique au formulaire d'échange */
.exchange-container {
    overflow: hidden;
    background-color: rgba(255, 255, 255, 0.1); /* Fond semi-transparent */
    padding: 30px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    position: fixed; /* Fixer la position du conteneur */
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    height: auto; /* Permettre au conteneur de s'adapter au contenu */
    max-height: 90vh; /* Limiter la hauteur maximale pour éviter le débordement */
    width: 75%;
}



.exchange-form-group {
    display: flex;
    flex-direction: column;
    margin-bottom: 20px;

}

.exchange-form-group label {
    margin-bottom: 5px;
    color: white;

}

.exchange-input-group {
    display: flex;
    align-items: stretch;
}


select, input[type="number"] {
                width: 70%;
                padding: 10px;
                border: 1px solid #ffffff;
                border-radius: 5px;
                margin-right: 5px;
                background-color: rgb(240, 240, 240);
            }


.exchange-container select {
    appearance: none;
    background-position: right 10px center;
    background-repeat: no-repeat;
}

.exchange-container #have {
    background-image: url("image.png");
}

.exchange-container #want {
    background-image: url("chemin/vers/votre/logo-perfect-money.png");
}

.exchange-icon {
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    margin: 20px 0;
}

.exchange-icon img {
    width: 40px;
    height: 40px;
    background-color: white;
    border-radius: 50%;
    padding: 5px;
    z-index: 1;
    transition: transform 0.3s ease-in-out; /* Ajout de la transition pour la rotation */
}

.exchange-icon.flipped img { /* Classe ajoutée lors du clic */
    transform: rotate(360deg);
}


.exchange-icon::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 0;
    width: 100%;
    height: 1px;
    background-color: #26bbe0;
    z-index: 0;
}

.exchange-container button[type="submit"] {
    background-color: #007bff;
    color: white;
    padding: 12px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    width: 100%;
}


.exchange-container select:focus,
.exchange-container input[type="number"]:focus {
    outline: none; /* Supprimer le contour par défaut */
}

/* Styles pour les contours personnalisés */
.vente:focus {
    border-color: red !important; /* Contour rouge pour la vente */
}

.achat:focus {
    border-color: green !important; /* Contour vert pour l'achat */
}
#receptionCard button[type="submit"] {  /* Style pour le bouton "Enregistrer" */
    display: block; /* Permet de centrer le bouton avec margin auto */
    width: 75%;
    margin: 10px auto; /* Centrer horizontalement et verticalement */
    margin-top: 10px;

}

.info-icon {
    text-align: center; /* Centrer le contenu de .info-icon */
}


#receptionCard input[type="text"] {
    display: block; /* Permet de centrer l'input avec margin auto */
    width: 75%; /* Ajustez la largeur selon vos besoins */
    padding: 10px;
    border: 1px solid #ccc;
    text-align: center;
    border-radius: 5px;
    margin: 10px auto; /* Centrer horizontalement et ajouter une marge verticale */
    box-sizing: border-box; 
    margin-top: 20px;
}

.info-icon {
    display: flex;
    flex-direction: column; /* Empiler l'icône et le texte verticalement */
    align-items: center; /* Centrer horizontalement */
    margin-top: 10px;
    margin-bottom: 20px;

}
.info-icon i {
    font-size: 20px;
    margin-right: 10px;
    color: #bc2020;
    margin: 10px auto; /* Centrer horizontalement et verticalement */
    margin-bottom: 10px;
    margin-top: 10px;

}

.back-button {
    position: absolute;
    bottom: 15px;
    left: 15px;
    padding: 8px 12px;
    color: white;
    background-color: rgba(255, 255, 255, 0.1); /* Fond semi-transparent */

    border: none;
    border-radius: 5px;
    cursor: pointer;
}
/* Styles spécifiques à la carte de dépôt */
#depositCard {
    display: none; 
}

#depositCard .exchange-input-group {
    position: relative;
    left: 12px;
    flex-direction: row; /* Alignement horizontal */
    align-items: center;
    gap: 0.5px; /* Espacement entre les éléments */
}

#depositCard input[type="text"] {
    display: block;
    width: calc(100% - 40px); /* Prend toute la largeur sauf l'espace pour le bouton de copie */
    padding: 10px;
    border: 1px solid #ccc;
    text-align: center; /* Alignement du texte à gauche */
    border-radius: 5px;
    margin: 5px auto;
    margin-bottom: 2px;
    box-sizing: border-box; 
}

#depositCard .copy-button {
    color: #ffffff;
    background-color: transparent;
    border: none;
    cursor: pointer;
    padding: 5px; /* Ajustement de la taille du bouton */
}

#depositCard .copy-button i {
    font-size: 16px;
}

#depositCard .info-icon {
    text-align: left;
    margin-top: 5px;
        margin: 10px auto;

}

#depositCard .info-icon i {
    margin-right: 5px;
}

#depositCard .info-icon p {
    margin: 0;
}


li {
    font-size: 12px;
    text-align: center;
    color: #ffffff;
    margin-bottom: 2px;  
}


#depositCard .exchange-form-group h3 {
    margin-top: 0; /* Supprime la marge supérieure par défaut */
    
}
.error-message {
    color: rgb(236, 88, 88);
    font-size: 11px;
    margin-top: 5px;
}


/* Styles pour le header et l'icône de profil */
.uide {
    
    color: rgb(255, 255, 255);
    /*display: flex;       /* Utiliser Flexbox pour l'alignement */
    align-items: center; /* Aligner les éléments verticalement au centre */
    flex-direction: column; /* Empiler les éléments verticalement */
    padding: 15px;
    position: absolute;  /* Garder le header fixe en haut */
    top: 0;
    width: 100%;
    z-index: 10;
    transition: top 0.3s ease-in-out; /* Ajouter une transition pour un effet plus fluide */
}

.exchange-container.keyboard-open ~ header { /* Appliquer le style lorsque le clavier est ouvert et que la carte a la classe 'keyboard-open' */
    top: -50px; /* Déplacer le header vers le haut pour le cacher */
}

.profile-container {
    display: flex;
    align-items: center;
    flex-shrink: 0; /* Empêche l'icône de rétrécir */
}

.profile-icon {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    margin-right: 10px;
}

#telegram-id {
    font-weight: bold;
    color: white;
    white-space: nowrap; /* Empêche le texte de passer à la ligne */
}

/* Styles pour les icônes sociales */
footer {
    background-color: rgba(0, 0, 0, 0.2);
    padding: 1px 0;        /* Réduit le padding vertical */
    width: 100%;
    position: fixed;
    bottom: 0;
    z-index: 10;
    margin-top: 100px; /* Ajuste cette valeur pour contrôler la distance avec la carte */
}

.social-icons {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap; /* Permet aux icônes de passer à la ligne si nécessaire */
}

.social-icons a {
    margin: 5px;  /* Espacement réduit pour les écrans plus petits */
    flex: 0 0 auto; /* Les icônes ne grandiront pas pour remplir l'espace */
}

.social-icons img {
    width: 50px; /* Taille réduite pour les écrans plus petits */
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
}

/* Media Queries pour ajuster la taille des icônes sur les petits écrans */
@media (max-width: 480px) {
    .social-icons img {
        width: 35px;
        height: 35px;
    }
}


#receptionCard p, #depositCard p {
    margin: 5px 0; /* Réduit la marge entre les paragraphes */
    line-height: 1.2; /* Réduit l'interligne */
}

#receptionCard .info-icon p, #depositCard .info-icon p {
    margin: 2px 0; /* Réduit la marge à l'intérieur de info-icon */
}

.socialgroup {
margin-bottom: -520px;
}
</style>
</head>
<body>
<div class="uide">
    <h1>Afreecash</h1> 
    <div class="profile-container">
        <img src="profil.jfif" alt="Icône de profil" class="profile-icon">
        <span id="telegram-id">UID: </span>
    </div>
    
</div>
    
</div>
    <div class="background"></div>
    <div class="exchange-container" id="exchangeCard">
        <h2>Exchange</h2>
    
        <div class="exchange-form-group">
            <label for="have">J'ai</label>
            <div class="exchange-input-group">
                <select id="have">
                    <option value="T-money">MTN Money</option>
                    <option value="Flooz-money">Moov Money</option>
                </select>
                <input type="number" id="have-amount" value="0.00">
            </div>
            <p id="have-error" class="error-message"></p> 
        </div>
        <div class="exchange-icon">
            <img src="iconu.png" alt="Logo échange">
        </div>
    
        <div class="exchange-form-group">
            <label for="want">Je veux</label>
            <div class="exchange-input-group">
                <select id="want">
                    <option value="perfect-money">Perfect Money</option>
                    <option value="paypal">PayPal</option>
                </select>
                <input type="number" id="want-amount" value="0.00">
            </div>
            <p id="want-error" class="error-message"></p> 
        </div>
        <button type="submit" id="exchangeButton">Echanger</button>
    </div>
    
    <div class="exchange-container" id="receptionCard" style="display: none;">
        <h2>ADRESSE DE RÉCEPTION</h2>
        <p id="receptionMessage"></p>
        <input type="text" id="perfectMoneyAddress" value="" placeholder="Ex: U43952795">
        <button type="submit" id="saveButton">ENREGISTRER</button>
        <div class="info-icon">
            <i class="fas fa-info-circle"></i>
            <p>Si il s'agit de votre première transaction , demandez l'aide d'un utilisateur expérimenté pour ne pas fait d'erreur car les transation sont irreversible .</p>
        </div>
        <button class="back-button" id="backButton"><i class="fas fa-arrow-left"></i> Retour</button>
    </div>
    
    <div class="exchange-container" id="depositCard" style="display: none;">
        <h2 class="depot">DÉPÔT</h2>
        <div class="exchange-form-group">
            <h4>PAYER PAR BNB (BEP20)</h4>
            <p>Envoyez 0.023 BNB à l'adresse</p>
            <div class="exchange-input-group">
                </div>
        </div>
        <div class="exchange-form-group">
            <p>À la fin du paiement, entrez l'ID de transaction afin de valider le paiement.</p>
            <input type="text" id="transactionId" placeholder="Entrez le hash (ID) de la transaction">
        </div>
        <button type="submit" id="validateButton">VALIDER MON PAIEMENT</button>
        <div class="info-icon">
            <p>Important :</p>
            <p>Envoyez exactement "l'actif ou monaie choie " et le montant exact , sinon vous risquer de pedre vos actifs </p>
        </div>
        <button class="back-button" id="backButtons"><i class="fas fa-arrow-left"></i> Retour</button>
    </div>
<div class="socialgroup">
    <p>Rejoingnez-nous sur nos différentes réseaux sociaux </p>
    <div class="social-icons">
        <a href="lien_vers_facebook" target="_blank">
            <img src="telegram.jpg" alt="Facebook">
        </a>
        <a href="lien_vers_twitter" target="_blank">
            <img src="youtube.png" alt="Twitter">
        </a>
        <a href="lien_vers_instagram" target="_blank">
            <img src="spport.png" alt="Instagram">
        </a>
    </div>
</div>
<footer>

</footer>
 
    

</body>
<script>
    
const saveButton = document.getElementById('saveButton');
const depositCard = document.getElementById('depositCard');
const receptionMessage = document.getElementById('receptionMessage');
const backButton = document.getElementById('backButton');
const backButtons = document.getElementById('backButtons');
const exchangeIcon = document.querySelector('.exchange-icon');
const haveSelect = document.getElementById('have');
const wantSelect = document.getElementById('want');
const haveAmountInput = document.getElementById('have-amount');
const wantAmountInput = document.getElementById('want-amount');
const exchangeCard = document.getElementById('exchangeCard');
const receptionCard = document.getElementById('receptionCard');
const exchangeButton = document.getElementById('exchangeButton');
let originalHeight = window.innerHeight; // Sauvegarde de la hauteur initiale


function openFullscreen() {
  document.documentElement.requestFullscreen(); // Demande le mode plein écran
  document.body.style.height = '100vh'; // Assure que le body occupe toute la hauteur
}


exchangeButton.addEventListener('click', function () {
  if (validateAmounts()) {
    // Les montants sont valides, continuer le processus d'échange
    const haveAmount = haveAmountInput.value;
    const wantOption = wantSelect.value;
    receptionMessage.textContent = `Vous avez demandé à acheter ${haveAmount} ${wantOption.toUpperCase()}. À quelle adresse ${wantOption.toUpperCase()} voulez-vous les recevoir ?`;
    exchangeCard.style.display = 'none';
    receptionCard.style.display = 'block';
  }
});

function validateAmounts() {
  const haveAmount = parseFloat(document.getElementById('have-amount').value);
  const wantAmount = parseFloat(document.getElementById('want-amount').value);
  const haveError = document.getElementById('have-error');
  const wantError = document.getElementById('want-error');

  haveError.textContent = ''; // Effacer les messages d'erreur précédents
  wantError.textContent = '';

  if (isNaN(haveAmount) || haveAmount <= 0) {
    haveError.textContent = "Veuillez entrer un montant valide supérieur à zéro.";
    return false;
  }
  if (isNaN(wantAmount) || wantAmount <= 0) {
    wantError.textContent = "Veuillez entrer un montant valide supérieur à zéro.";
    return false;
  }
  return true;
}



// Gestionnaires d'événements pour les boutons de retour
backButton.addEventListener('click', () => {
  receptionCard.style.display = 'none';
  exchangeCard.style.display = 'block';
});

backButtons.addEventListener('click', () => {
  depositCard.style.display = 'none';
  receptionCard.style.display = 'block';
});

// Gestionnaire d'événement pour le bouton "Enregistrer"
saveButton.addEventListener('click', () => {
  receptionCard.style.display = 'none';
  depositCard.style.display = 'block';
});

exchangeIcon.addEventListener('click', () => {
    exchangeIcon.classList.toggle('flipped');

    // Stocker les options du premier menu déroulant
    const haveOptions = Array.from(haveSelect.options);
    const wantOptions = Array.from(wantSelect.options);

    // Échanger les options
    haveSelect.innerHTML = ''; // Vider le premier menu
    wantOptions.forEach(option => {
        haveSelect.add(option.cloneNode(true)); // Cloner les options du deuxième menu
    });

    wantSelect.innerHTML = ''; // Vider le deuxième menu
    haveOptions.forEach(option => {
        wantSelect.add(option); // Ajouter les options du premier menu
    });
});

// Fonction pour mettre à jour les couleurs des bordures en fonction des devises sélectionnées
function updateInputBorders() {
    const haveValue = haveSelect.value;
    const wantValue = wantSelect.value;

    haveSelect.classList.remove('vente', 'achat');
    wantSelect.classList.remove('vente', 'achat');
    haveAmountInput.classList.remove('vente', 'achat');
    wantAmountInput.classList.remove('vente', 'achat');

    if (haveValue === 'mtn-money' || haveValue === 'orange-money' || haveValue === 'moov-money' || haveValue === 'tmoney') {
        haveSelect.classList.add('vente');
        haveAmountInput.classList.add('vente');
    } else {
        haveSelect.classList.add('achat');
        haveAmountInput.classList.add('achat');
    }

    if (wantValue === 'mtn-money' || wantValue === 'orange-money' || wantValue === 'moov-money' || wantValue === 'tmoney') {
        wantSelect.classList.add('vente');
        wantAmountInput.classList.add('vente');
    } else {
        wantSelect.classList.add('achat');
        wantAmountInput.classList.add('achat');
    }
}

// Appeler updateInputBorders au chargement initial pour définir les bonnes couleurs
updateInputBorders();

// Récupérer l'ID Telegram (à placer dans votre JavaScript)
const telegramUserId = window.Telegram.WebApp.initDataUnsafe.user?.id;
document.getElementById('telegram-id').textContent = telegramUserId ? `ID: ${telegramUserId}` : '';



// Ajouter des écouteurs d'événements pour mettre à jour les couleurs lors du changement de devise
haveSelect.addEventListener('change', updateInputBorders);
wantSelect.addEventListener('change', updateInputBorders);



// Récupération et affichage de l'ID Telegram (à placer après le chargement du DOM)
document.addEventListener('DOMContentLoaded', function() {
    const telegramUserId = window.Telegram.WebApp.initDataUnsafe.user?.id;
    document.getElementById('telegram-id').textContent = telegramUserId ? `ID: ${telegramUserId}` : '';

    // Gestion de l'affichage du clavier
    let originalHeight = window.innerHeight;
    let keyboardVisible = false; // Ajout d'une variable pour suivre l'état du clavier

    function adjustForKeyboard() {
        const currentHeight = window.innerHeight;

        if (!keyboardVisible && currentHeight < originalHeight) { // Clavier vient de s'ouvrir
            keyboardVisible = true;
            exchangeCard.classList.add('keyboard-open');
            exchangeCard.style.maxHeight = '80vh';
        } else if (keyboardVisible && currentHeight === originalHeight) { // Clavier vient de se fermer
            keyboardVisible = false;
            exchangeCard.classList.remove('keyboard-open');
            exchangeCard.style.maxHeight = '90vh';
        }
    }


    window.addEventListener('resize', adjustForKeyboard);
    });
</script>


</body>
</html>
